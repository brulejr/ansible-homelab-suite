# Homelab SSO baseline (Keycloak + oauth2-proxy + Traefik middleware)

sso_enabled: true

# Your internal domain
sso_base_domain: "brulenet.dev"

# Public (internal) FQDNs
keycloak_fqdn: "keycloak.{{ sso_base_domain }}"
sso_gateway_fqdn: "sso.{{ sso_base_domain }}"

# Keycloak realm for the homelab
keycloak_realm: "homelab"

# =========================
# Keycloak access controls
# =========================
# Restrict Keycloak UI to VPN + optionally internal server subnets.
# Put your actual VPN subnet(s) here.
keycloak_allowed_cidrs:
#  - "10.8.0.0/24" # example VPN subnet
#  - "192.168.0.0/16" # optional: internal RFC1918 (tighten if you prefer)

# =========================
# oauth2-proxy (SSO gateway)
# =========================
# Client registered in Keycloak
sso_oidc_client_id: "homelab-sso"
sso_oidc_client_secret: "{{ vault_sso_oidc_client_secret }}" # store in vault

# Cookie secret: 32-byte base64 (oauth2-proxy expects base64 secret)
sso_cookie_secret: "{{ vault_sso_cookie_secret }}" # store in vault

# SSO cookie domain so login works across *.brulenet.dev
sso_cookie_domain: ".{{ sso_base_domain }}"

# If you want to restrict who can log in:
# Use "*" to allow any Keycloak user. Or set to your domain (if you enforce email domain).
sso_email_domains:
  - "*"

# Optional: Keycloak groups/roles requirement (leave empty for no restriction)
sso_allowed_groups: []
